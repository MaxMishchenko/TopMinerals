$(document).ready((function(){const e=$(".contacts__form-select-field"),t=e.find("#custom-select"),s=e.find(".contacts__form-select-options"),o=e.find(".contacts__form-select-wrapper"),r=s.find(".custom--option"),n=t.find("#selected-region"),a=e.find('input[name="region"]'),c=$("#phone"),i=$("#email"),l=($("#privacy-checkbox"),$("#privacy")),d=$("#name"),f=$("#contact-form"),p=$("#submit"),h="+380 ",u=$(".contacts__faq-list"),m=$(".contacts__faq-icon"),v=$("[data-text]");function C(){s.removeClass("open"),o.removeClass("open"),e.removeClass("active")}function g(){const e=i.val().trim();return""===e?(i.removeClass("error"),!0):!!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)||(i.addClass("error"),!1)}const _=new MutationObserver((function(e){e.forEach((function(e){if("class"===e.attributeName){const t=$(e.target);t.hasClass("error")?t.siblings(".contacts__form-field-error").css("display","flex"):t.siblings(".contacts__form-field-error").css("display","")}}))}));t.on("click",(function(t){t.stopPropagation(),s.toggleClass("open"),o.toggleClass("open"),e.toggleClass("active")})),t.on("keydown",(function(e){"Enter"===e.key&&$(this).is(":focus")&&(e.preventDefault(),t.trigger("click"))})),r.on("click",(function(e){e.stopPropagation();const t=$(this),s=t.data("value"),o=t.text();n.text(o),a.val(s),r.removeClass("selected"),t.addClass("selected"),C()})),$(document).on("click",C),$(document).on("keydown",(function(e){"Escape"===e.key&&C()})),c.on("focus",(function(){c.val().startsWith(h)||c.val(h)})),c.on("input",(function(){let e=c.val().replace(/\D/g,"");1!==e.length||c.val().startsWith(h)||(e="380"+e),e.startsWith("380")||(e="380"+e.replace(/^380/,"")),e=e.slice(0,12);let t="+";e.length>0&&(t+=e.substring(0,3)),e.length>3&&(t+=" "+e.substring(3,5)),e.length>5&&(t+=" "+e.substring(5,8)),e.length>8&&(t+=" "+e.substring(8,12)),c.val(t),c.hasClass("error")&&12===e.length&&c.removeClass("error")})),c.on("keydown",(function(e){c.val(),("Backspace"===e.key||"Delete"===e.key)&&c[0].selectionStart<=5&&e.preventDefault()})),c.on("blur",(function(){const e=c.val().replace(/\D/g,"");0===e.length?(c.val(""),c.removeClass("error")):12!==e.length?c.addClass("error"):c.removeClass("error")})),i.on("input",(function(){i.hasClass("error")&&g()&&i.removeClass("error")})),i.on("blur",(function(){g()||i.addClass("error")})),p.on("click",(function(e){if(e.preventDefault(),function(){let e=!0;if(f.find("[required]").each((function(){""===$(this).val().trim()?($(this).addClass("error"),e=!1):$(this).removeClass("error")})),12!==c.val().replace(/\D/g,"").length?(c.addClass("error"),e=!1):c.removeClass("error"),l.prop("checked")?l.removeClass("error"):(l.addClass("error"),e=!1),!e){const e=f.find(".error").first();if(e.length){const t=e.offset().top-$(window).height()/2+e.outerHeight()/2;$("html, body").animate({scrollTop:t},500)}}return e}()){const e=f.serialize(),t=$(".contacts__form"),s=t.offset().top,o=t.outerHeight(),r=s-$(window).height()/2+o/2;$.ajax({type:"POST",url:"https://jsonplaceholder.typicode.com/posts",data:e,success:function(e){$(".contacts__form-wrapper").hide(),$(".contacts__form-success").removeClass("hidden"),$("html, body").animate({scrollTop:r},600),f[0].reset(),f.find(".error").removeClass("error")},error:function(e,t,s){}})}})),$(".contacts__form-field").each((function(){_.observe(this,{attributes:!0,attributeFilter:["class"]})})),$("#privacy-checkbox, #privacy").on("click",(function(e){e.preventDefault();const t=$("#privacy"),s=$(".contacts__form-checkbox-icon");t.removeClass("error"),t.hasClass("checked")?(t.prop("checked",!1).removeClass("checked"),s.removeClass("checked")):(t.prop("checked",!0).addClass("checked"),s.addClass("checked"))})),l.on("change",(function(){$(this).prop("checked")&&$(this).removeClass("error")})),d.on("input",(function(){const e=$(this).val().trim();$(this).hasClass("error")&&e.length>=2&&($(this).removeClass("error"),$(this).siblings(".contacts__form-field-error").css("display",""))})),u.on("click",(function(){const e=$(this),t=e.find(".contacts__faq-icon"),s=e.find("[data-text]");t.hasClass("open")?(t.removeClass("open"),s.stop(!0,!0).animate({opacity:0},150,(function(){$(this).slideUp(200)}))):(m.removeClass("open"),v.stop(!0,!0).animate({opacity:0},150,(function(){$(this).slideUp(200)})),setTimeout((()=>{t.addClass("open"),s.stop(!0,!0).css({display:"none",opacity:0}).slideDown(200).animate({opacity:1},400)}),0))}))}));