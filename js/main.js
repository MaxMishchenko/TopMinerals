$(document).ready((function(){const t=$(".main__products-item"),n=$(".main__products-carousel-track"),e=$(".main__products-carousel-dots"),a=$(".main__products-carousel-nav"),i=$(".main__hero-category-slider-track"),s=$(".main__products-carousel-nav--prev"),o=$(".main__products-carousel-nav--next"),d=$(".main__hero-category-slider-slide");let r=0,c=0,l=1;function u(){return n.find(".main__products-carousel-slide").filter(":visible")}function h(){const t=u(),i=window.innerWidth>=1024,d=i?3:1,c=i?Math.max(t.length-d+1,1):Math.ceil(t.length/d);if(i&&t.length<=d)return n.css("transform",""),e.empty(),a.hide(),void s.add(o).addClass("disabled");a.show(),r=Math.min(r,c-1),function(){const t=u(),e=t.eq(0);if(!e.length)return;const a=e.outerWidth(!0),i=r*(a+16);n.css("transform",`translateX(-${i}px)`)}(),function(t){e.empty();for(let n=0;n<t;n++){const t=m(n);e.append(t)}}(c),function(t){r<=0?s.addClass("disabled"):s.removeClass("disabled");r>=t-1?o.addClass("disabled"):o.removeClass("disabled")}(c)}function m(t){const n=$('<button type="button"></button>').attr("aria-label","Перемкнути на слайд "+(t+1)).toggleClass("active",t===r);return n.on("click",(()=>{r=t,h()})),n}function _(t){const n=t.touches[0];startX=n.clientX,startY=n.clientY,isSwiping=!1}function g(t){const n=t.touches[0];endX=n.clientX,endY=n.clientY,!isSwiping&&Math.abs(endX-startX)>Math.abs(endY-startY)&&(isSwiping=!0,t.preventDefault())}function p(){if(!isSwiping)return;const t=endX-startX,n=u();Math.abs(t)>50&&(r=(r+(t>0?-1:1)+n.length)%n.length,h()),startX=startY=endX=endY=0,isSwiping=!1}function f(){const t=u(),n=window.innerWidth>=1024,e=n?3:1;n?Math.max(t.length-e+1,1):Math.ceil(t.length/e);r>0&&(r--,h())}function v(){const t=u(),n=window.innerWidth>=1024,e=n?3:1,a=n?Math.max(t.length-e+1,1):Math.ceil(t.length/e);r<a-1&&(r++,h())}function b(){t.removeClass("active"),$(this).addClass("active");w($(this).data("cat")),r=0,h(),window.lazyLoadBackground()}function w(t){$("[data-slide-text], [data-slide-img], [data-slide]").each((function(){const n=$(this),e=n.data("slideText"),a=n.data("slideImg"),i=n.attr("data-slide"),s=e===t||a===t||i&&i.split(",").map((t=>t.trim())).includes(String(t));n.toggleClass("hidden",!s)}))}function y(){const t=d.outerWidth(!0),n=-c*t;i.css("transform",`translateX(${n}px)`),0===c?$(".main__hero-category-slider-button--prev").addClass("disabled"):$(".main__hero-category-slider-button--prev").removeClass("disabled"),c>=d.length-l?$(".main__hero-category-slider-button--next").addClass("disabled"):$(".main__hero-category-slider-button--next").removeClass("disabled")}function C(){l=window.innerWidth>=1440?2:1}$(window).on("resize",(()=>{h()})),$(".main__hero-category-slider-button--next").click((function(){c<d.length-l&&c++,y()})),$(".main__hero-category-slider-button--prev").click((function(){c>0&&c--,y()})),C(),y(),$(window).resize((function(){C(),y()})),w($(".main__products-item.active").data("cat")),r=0,h(),window.lazyLoadBackground(),function(){const t=n[0];t.addEventListener("touchstart",_,{passive:!0}),t.addEventListener("touchmove",g,{passive:!1}),t.addEventListener("touchend",p)}(),$(".main__products-carousel-nav--prev").click(f),$(".main__products-carousel-nav--next").click(v),t.on("click",b)}));