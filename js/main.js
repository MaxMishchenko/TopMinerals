$(document).ready((function(){const t=$(window),s=$("body"),e=$("#header"),i=$("#burger"),a=$("#menu"),o=$("#menu-chevron"),n=$("#submenu"),c=$("#mobile-menu"),l=$(".lazy-bg"),r=$(".to-top"),d=$(".section__products-item"),u=$(".section__products-carousel-track"),f=$(".section__products-carousel-dots"),p=t.height();let h,g,v=0;function m(){t.scrollTop()>16||16!==e.offset().top?e.addClass("floating"):e.removeClass("floating")}function b(){const s=t.scrollTop();l.each((function(){const t=$(this),e=t.offset().top,i=t.data("bg");t.hasClass("lazy-bg")&&t.is(":visible")&&e<s+p&&i&&t.css({"background-image":`url(${i})`,opacity:0}).animate({opacity:1},400).removeClass("lazy-bg")}))}function y(){const t=u.find(".section__products-carousel-slide").filter(":visible");v=Math.min(v,t.length-1);const s=`calc(-${100*v}% - ${16*v}px)`;u.css("transform",`translateX(${s})`),f.empty(),t.each((t=>{const s=$('<button type="button"></button>').attr("aria-label","Перемкнути на слайд "+(t+1)).toggleClass("active",t===v);s.on("click",(()=>{v=t,y()})),f.append(s)}))}function C(){n.hasClass("visible")?(n.css({transition:"opacity 0.4s ease",opacity:0}),setTimeout((()=>{n.removeClass("visible").css("transition","max-height 0.4s ease, opacity 0.4s ease")}),400)):(n.removeClass("hidden").addClass("visible").css({opacity:0,transition:"max-height 0.4s ease"}),setTimeout((()=>{n.css({transition:"opacity 0.4s ease",opacity:1})}),400)),o.toggleClass("active")}r.click((function(t){t.preventDefault(),$("html, body").animate({scrollTop:0},500)})),t.on("scroll resize",(function(){g||(g=setTimeout((()=>{b(),g=null}),200))})),$.fn.fadeInFlex=function(t=400){return this.css({display:"flex",opacity:0}).animate({opacity:1},t)},$.fn.fadeOutFlex=function(t=400){return this.animate({opacity:0},t,(function(){$(this).css("display","none")}))},$(".section__products-carousel-nav--prev").click((()=>{const t=u.find(".section__products-carousel-slide").filter(":visible");v=(v-1+t.length)%t.length,y()})),$(".section__products-carousel-nav--next").click((()=>{const t=u.find(".section__products-carousel-slide").filter(":visible");v=(v+1)%t.length,y()})),d.on("click",(function(){d.removeClass("active"),$(this).addClass("active");const t=$(this).data("cat");$("[data-slide-text], [data-slide-img], [data-slide]").each((function(){const s=$(this),e=s.data("slideText"),i=s.data("slideImg"),a=s.attr("data-slide"),o=e===t||i===t||a&&a.split(",").map((t=>t.trim())).includes(String(t));s.toggleClass("hidden",!o)})),v=0,y(),b()})),i.on("click",(function(){$(this).toggleClass("active"),c.toggleClass("active"),s.toggleClass("lock"),n.hasClass("visible")&&C()})),a.click(C),m(),b(),y(),function(){const t=u[0];let s,e,i,a,o=!1;t.addEventListener("touchstart",(t=>{const i=t.touches[0];s=i.clientX,e=i.clientY,o=!1}),{passive:!0}),t.addEventListener("touchmove",(t=>{const n=t.touches[0];i=n.clientX,a=n.clientY,!o&&Math.abs(i-s)>Math.abs(a-e)&&(o=!0,t.preventDefault())}),{passive:!1}),t.addEventListener("touchend",(()=>{if(!o)return;const t=i-s,n=u.find(".section__products-carousel-slide").filter(":visible");Math.abs(t)>50&&(v=(v+(t>0?-1:1)+n.length)%n.length,y()),s=e=i=a=0,o=!1}))}(),t.on("scroll",(function(){m(),t.scrollTop()>400?r.is(":visible")||r.fadeInFlex(300):r.is(":visible")&&r.fadeOutFlex(300),r.addClass("scrolling"),clearTimeout(h),h=setTimeout((()=>r.removeClass("scrolling")),200)}))}));