$(document).ready((function(){const t=$(".main__products-item"),n=$(".main__products-carousel-track"),e=$(".main__products-carousel-dots"),i=$(".main__products-carousel-nav"),a=$(".main__hero-category-slider-track"),s=$(".main__hero-category-slider-slide");let o=0,r=0,c=1;function d(){return n.find(".main__products-carousel-slide").filter(":visible")}function l(){const t=d(),a=window.innerWidth>=1024,s=a?3:1,r=a?Math.max(t.length-s+1,1):Math.ceil(t.length/s);if(a&&t.length<=s)return n.css("transform",""),e.empty(),void i.hide();i.show(),o=Math.min(o,r-1),function(){const t=d(),e=t.eq(0);if(!e.length)return;const i=e.outerWidth(!0),a=o*(i+16);n.css("transform",`translateX(-${a}px)`)}(),function(t){e.empty();for(let n=0;n<t;n++){const t=u(n);e.append(t)}}(r)}function u(t){const n=$('<button type="button"></button>').attr("aria-label","Перемкнути на слайд "+(t+1)).toggleClass("active",t===o);return n.on("click",(()=>{o=t,l()})),n}function h(t){const n=t.touches[0];startX=n.clientX,startY=n.clientY,isSwiping=!1}function m(t){const n=t.touches[0];endX=n.clientX,endY=n.clientY,!isSwiping&&Math.abs(endX-startX)>Math.abs(endY-startY)&&(isSwiping=!0,t.preventDefault())}function g(){if(!isSwiping)return;const t=endX-startX,n=d();Math.abs(t)>50&&(o=(o+(t>0?-1:1)+n.length)%n.length,l()),startX=startY=endX=endY=0,isSwiping=!1}function f(){const t=d(),n=window.innerWidth>=1024,e=n?3:1;n?Math.max(t.length-e+1,1):Math.ceil(t.length/e);o>0&&(o--,l())}function _(){const t=d(),n=window.innerWidth>=1024,e=n?3:1,i=n?Math.max(t.length-e+1,1):Math.ceil(t.length/e);o<i-1&&(o++,l())}function p(){t.removeClass("active"),$(this).addClass("active");!function(t){$("[data-slide-text], [data-slide-img], [data-slide]").each((function(){const n=$(this),e=n.data("slideText"),i=n.data("slideImg"),a=n.attr("data-slide"),s=e===t||i===t||a&&a.split(",").map((t=>t.trim())).includes(String(t));n.toggleClass("hidden",!s)}))}($(this).data("cat")),o=0,l(),window.lazyLoadBackground()}function v(){const t=s.outerWidth(!0),n=-r*t;a.css("transform",`translateX(${n}px)`),0===r?$(".main__hero-category-slider-button--prev").addClass("disabled"):$(".main__hero-category-slider-button--prev").removeClass("disabled"),r>=s.length-c?$(".main__hero-category-slider-button--next").addClass("disabled"):$(".main__hero-category-slider-button--next").removeClass("disabled")}function w(){c=window.innerWidth>=1440?2:1}$(window).on("resize",(()=>{l()})),$(".main__hero-category-slider-button--next").click((function(){r<s.length-c&&r++,v()})),$(".main__hero-category-slider-button--prev").click((function(){r>0&&r--,v()})),w(),v(),$(window).resize((function(){w(),v()})),l(),function(){const t=n[0];t.addEventListener("touchstart",h,{passive:!0}),t.addEventListener("touchmove",m,{passive:!1}),t.addEventListener("touchend",g)}(),$(".main__products-carousel-nav--prev").click(f),$(".main__products-carousel-nav--next").click(_),t.on("click",p)}));